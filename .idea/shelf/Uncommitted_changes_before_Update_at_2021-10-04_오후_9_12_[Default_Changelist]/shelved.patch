Index: app/src/main/java/com/cookandroid/withmetabbar/navigation/MyPageFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.cookandroid.withmetabbar.navigation;\r\n\r\nimport android.content.ContentProvider;\r\nimport android.content.ContentResolver;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.cookandroid.withmetabbar.CustomAdapter;\r\nimport com.cookandroid.withmetabbar.MainActivity;\r\nimport com.cookandroid.withmetabbar.R;\r\nimport com.cookandroid.withmetabbar.certify.JoinStartFragment;\r\nimport com.cookandroid.withmetabbar.certify.MainActivity2;\r\nimport com.cookandroid.withmetabbar.model.Meet;\r\nimport com.cookandroid.withmetabbar.model.Member;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport static android.app.Activity.RESULT_CANCELED;\r\nimport static android.app.Activity.RESULT_OK;\r\nimport static android.content.ContentValues.TAG;\r\n\r\npublic class MyPageFragment extends Fragment {\r\n\r\n    private FirebaseDatabase database;\r\n    private DatabaseReference databaseReference;\r\n    private String uid=\"\";\r\n    private final int GET_GALLERY_IMAGE = 200;//?무슨의미\r\n    private ImageView imageView, imageView7;\r\n    private Uri imageUri;//모임이미지\r\n\r\n\r\n    //private FragmentPagerAdapter fragmentPagerAdapter;//코인충전어뎁터\r\n    Button btn_charge, btn_ondo, btn_mygroup;\r\n    ImageButton btn_block, btn_friends_invite,btn_logout, btn_withdrawal;\r\n    LinearLayout myMeetLayout;\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,\r\n                             @Nullable Bundle savedInstanceState) {\r\n        ViewGroup vGroup = (ViewGroup) inflater.inflate(R.layout.mypage_fragment, container, false);\r\n        TextView tvName= vGroup.findViewById(R.id.tv_mName);\r\n        TextView tvNick= vGroup.findViewById(R.id.tv_nickname);\r\n        TextView tvGen= vGroup.findViewById(R.id.tv_gender);\r\n        TextView tvAge= vGroup.findViewById(R.id.tv_age);\r\n        imageView = vGroup.findViewById(R.id.imagemy);\r\n        myMeetLayout = vGroup.findViewById(R.id.myMeetLayout);\r\n        btn_logout=vGroup.findViewById(R.id.btn_logout);\r\n        btn_withdrawal=vGroup.findViewById(R.id.btn_withdrawal);\r\n\r\n\r\n        Intent intent = new Intent();\r\n\r\n\r\n\r\n        //data 불러오기 내 uid에 해당하는 데이터 불러오기\r\n        uid=FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n        database= FirebaseDatabase.getInstance();\r\n        databaseReference=database.getReference(\"users\").child(uid);//DB Table Connect\r\n        databaseReference.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                //실제적으로 파이어베이스 데이터베이스의 데이터를 받아오는 곳\r\n                Member member = dataSnapshot.getValue(Member.class);\r\n                //Log.d(\"memberInput\", String.valueOf(member.mName));\r\n                tvName.setText(member.mName);\r\n                tvNick.setText(member.nick);\r\n                tvAge.setText(\"\"+member.mAge);\r\n\r\n                //성별\r\n//                if (member.mGen==1){\r\n//                    tvGen.setText(\"남\");\r\n//\r\n//                }else if (member.mAge==2){\r\n//                    tvGen.setText(\"여\");\r\n//\r\n//                }else{\r\n//                }\r\n                member.getProfileImageUrl();\r\n                Log.d(\"getProfileImageUrl\",member.getProfileImageUrl());\r\n//                imageView.setImageURI(Uri.parse(member.getProfileImageUrl()));\r\n                Glide.with(getContext())\r\n                        .load(member.getProfileImageUrl())\r\n                        .into(imageView);\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                //디비를 가져오는 도중 에러 발생 시\r\n                Toast.makeText(getContext(),error.getMessage(),Toast.LENGTH_SHORT).show();\r\n                // Getting Post failed, log a message\r\n                Log.w(TAG, \"loadPost:onCancelled\", error.toException());\r\n\r\n            }\r\n        });\r\n\r\n        //내모임보기\r\n        myMeetLayout.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                FragmentMyMeetHome fragmentMyMeetHome = new FragmentMyMeetHome(); //내 모임 보기 화면\r\n                ((MainActivity)getActivity()).replaceFragment(fragmentMyMeetHome);\r\n            }\r\n        });\r\n\r\n        //코인충전버튼\r\n        btn_charge= vGroup.findViewById(R.id.charge);\r\n        btn_charge.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                CoinMainFragment coinMainFragment= new CoinMainFragment();\r\n                ((MainActivity)getActivity()).replaceFragment(coinMainFragment);\r\n            }\r\n        });\r\n\r\n//        btn_ondo= vGroup.findViewById(R.id.btn_ondo);\r\n//        btn_ondo.setOnClickListener(new View.OnClickListener() {\r\n//            @Override\r\n//            public void onClick(View v) {\r\n//                OndoFragment ondoFragment= new OndoFragment();\r\n//\r\n//                ((MainActivity)getActivity()).replaceFragment(ondoFragment);\r\n//            }\r\n//        });\r\n\r\n        btn_block= vGroup.findViewById(R.id.btn_block);\r\n        btn_block.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                FriendsBlockFragment friendsBlockFragment= new FriendsBlockFragment();\r\n                ((MainActivity)getActivity()).replaceFragment(friendsBlockFragment);\r\n            }\r\n        });\r\n\r\n        btn_friends_invite= vGroup.findViewById(R.id.btn_friends_invite);\r\n        btn_friends_invite.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                FriendsInviteFragment friendsInviteFragment = new FriendsInviteFragment();\r\n                ((MainActivity)getActivity()).replaceFragment(friendsInviteFragment);\r\n            }\r\n        });\r\n\r\n\r\n        imageView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n//                Intent intent = new Intent();\r\n                intent.setType(\"image/*\");\r\n                intent.setAction(Intent.ACTION_GET_CONTENT);\r\n                startActivityForResult(intent, GET_GALLERY_IMAGE);\r\n\r\n\r\n            }\r\n        });\r\n\r\n        //내가 만든 모임 화면으로 전환\r\n        //ViewGroup viewGroup = (ViewGroup) inflater.inflate(R.layout.mypage_fragment, container, false);\r\n\r\n        //logout로그아웃\r\n        btn_logout.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                FirebaseAuth.getInstance().signOut();\r\n                Intent intent = new Intent(getContext(), MainActivity2.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //withdraw회원탈퇴\r\n        btn_withdrawal.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n\r\n                user.delete()\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                if (task.isSuccessful()) {\r\n                                    Log.d(TAG, \"User account deleted.\");\r\n                                    Intent intent = new Intent(getContext(), MainActivity2.class);\r\n                                    startActivity(intent);\r\n                                }\r\n                            }\r\n                        });\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n\r\n        return vGroup;\r\n    }\r\n\r\n\r\n    //갤러리로 가는 법\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == GET_GALLERY_IMAGE) {\r\n            if (resultCode == RESULT_OK) {\r\n//                int takeFlas = data.getFlags() & (Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\r\n//                ContentResolver resolver = getContext().getContentResolver();\r\n//                if (data.getData()==null){\r\n//                    imageView.setImageURI(data.getData());\r\n//                    imageUri = data.getData();\r\n//                    return;\r\n//                }\r\n//                resolver.takePersistableUriPermission(data.getData(),takeFlas);\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {\r\n                    try {\r\n                        getContext().grantUriPermission(\r\n                                getContext().getPackageName(),\r\n                                data.getData(),\r\n                                Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION\r\n                        );\r\n                        //imageView.setImageURI(data.getData());\r\n                    } catch (IllegalArgumentException e) {\r\n                        getContext().grantUriPermission(\r\n                                getContext().getPackageName(),\r\n                                data.getData(),\r\n                                Intent.FLAG_GRANT_READ_URI_PERMISSION\r\n                        );  // kikat api only 0x3 are\r\n                        // allowed FLAG_GRANT_READ_URI_PERMISSION = 1 | FLAG_GRANT_WRITE_URI_PERMISSION = 2;\r\n                        //imageView.setImageURI(data.getData());\r\n                    } catch (SecurityException e) {\r\n                        // ignore\r\n                    }\r\n\r\n                    int takeFlags = data.getFlags();\r\n                    takeFlags &= (Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\r\n\r\n                    try {\r\n                        getContext().getContentResolver().takePersistableUriPermission(data.getData(), takeFlags);\r\n                        imageView.setImageURI(data.getData());\r\n                    } catch (SecurityException e) {\r\n                        // ignore\r\n                    }\r\n                }\r\n\r\n\r\n\r\n                imageView.setImageURI(data.getData());\r\n                imageUri = data.getData();\r\n                //Log.d(\"갤러리에서 불러온 이미지 경로\", String.valueOf(imageUri));\r\n\r\n\r\n            } else if (resultCode == RESULT_CANCELED) {\r\n                Toast.makeText(getContext(), \"사진 선택 취소\", Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    } //갤러리에서 사진 불러와서 넣기\r\n\r\n\r\n\r\n    protected void onMainActivity(int requestCode, int resultCode, Intent data) {\r\n        if(requestCode == GET_GALLERY_IMAGE&&resultCode == RESULT_OK&&data !=\r\n                null && data.getData()!=null){\r\n            Uri selectedImageUri = data.getData();\r\n            imageView.setImageURI(selectedImageUri);\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/cookandroid/withmetabbar/navigation/MyPageFragment.java	(revision bd9b3d1cb948d94ecae792ab795b3b1e3918c7e4)
+++ app/src/main/java/com/cookandroid/withmetabbar/navigation/MyPageFragment.java	(date 1633349538473)
@@ -66,7 +66,7 @@
         ViewGroup vGroup = (ViewGroup) inflater.inflate(R.layout.mypage_fragment, container, false);
         TextView tvName= vGroup.findViewById(R.id.tv_mName);
         TextView tvNick= vGroup.findViewById(R.id.tv_nickname);
-        TextView tvGen= vGroup.findViewById(R.id.tv_gender);
+
         TextView tvAge= vGroup.findViewById(R.id.tv_age);
         imageView = vGroup.findViewById(R.id.imagemy);
         myMeetLayout = vGroup.findViewById(R.id.myMeetLayout);
